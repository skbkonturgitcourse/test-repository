const _=()=>({session:Math.round(1e15*Math.random()),config:{script:!0,profileData:"",id:null,tags:[],extdataid:!1,idSessionDomain:!1,idSessionPage:!1,ids:{ga:"",gid:""},tagsRaw:[],triggers:{noBounce:{enable:!1,timeout:15,param_call:{},callback:function(){}},catchRef:{enable:!1,referrer:""},trackMouse:{enable:!1,param_call:{},interval:3e3,stopRetryCount:100},init_call:{enable:!0,param_call:{},callback:function(){}},elapsed_seconds:{enable:!1,timeouts:[5,10,30,60,120,300],param_call:{},callback:function(){}},page_down_scroll:{enable:!1,margin_bottom:100,param_call:{},callback:function(){}},scroll_to:{enable:!1,param_call:{},markers:[],window_checkpoint_percent:50,callback:function(){}},scroll_percents:{enable:!1,percents:[25,50,60,70,90],param_call:{},callback:function(e){}},config:{enable:!1,el_id:"",el_class_name:"",callback:function(){}},gaid:{enable:!0,loaded:!1,callback:function(){}},push_to_server:{success:function(){},error:function(){}}}},params:{tags:[]},loaded:!1,configure:function(e,t){const n=this,o=this.config.id;"function"==typeof e.init&&(t=e.init,delete e.init);for(const t in e)if(e.hasOwnProperty(t))if("triggers"===t){for(const o in e[t])if(e[t].hasOwnProperty(o))for(const i in e[t][o])if(e[t][o].hasOwnProperty(i)){if(!n.config.triggers.hasOwnProperty(o))continue;n.config.triggers[o][i]=e[t][o][i]}}else this.config[t]=e[t];if(this.session&&this.config.script&&this.config.id)return this.loaded?o!==this.config.id?n.relocate((function(){t&&"function"==typeof t&&t()})):t&&"function"==typeof t&&t():this.load((function(){n.relocate((function(){if(n.triggers){!0===n.config.triggers.config.enable&&(n.triggers.config(),n.config.triggers.config.enable=!1);for(const e in n.triggers)!0===n.config.triggers[e].enable&&n.triggers[e]()}t&&"function"==typeof t&&t()}))})),this;console&&console.log&&console.log("Wrong adcm configuration...")},ext:function(e){for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},ready:function(e,t){let n=[],o=!1,i=!1;function c(){if(!o){o=!0;for(let e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}}o?setTimeout((function(){e(t)}),1):(n.push({fn:e,ctx:t}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(c,1):i||(document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&c()})),window.attachEvent("onload",c)),i=!0))},load:function(e,t){const n=this;this.loaded||(this.loaded=!0,n.config.idSessionDomain=n.sessionManager.domain.get(),n.config.idSessionPage=n.sessionManager.page.get(),"function"==typeof e&&e()),t&&this.ready((function(){const o=document.createElement("script");o.src=t||n.config.script,o.onload=function(){try{"object"==typeof n.sessionManager&&(n.config.idSessionDomain=n.sessionManager.domain.get(),n.config.idSessionPage=n.sessionManager.page.get()),e&&e()}catch(e){}},document.getElementsByTagName("head")[0].appendChild(o)}))}}),w=()=>({knownIds:[7597,7580,7578,7462,7457,7452,7450,7449,7446,7443,7442,7435,7434,7433,7415,7414,7393,7356,7344,7309,7292,7237,7120,6707,6679,6637,6628,6624,6524,6505,6504,6463,6432,6414,6412,6405,6384,6383,6380,6371,6370,6368,6364,6363,6358,6343,6336,6331,6328,6321,6284,6242,6226,6026,6016,6015,2210,2025,1131,1103,1086,1083,1082,1079,1078,1075,1073,1072,1067,1066,1065,1064,1034,168,143,127],hardSync:function(e){try{if(!e)e=[7238,7210,7209,7208,7243,7244,7245,7246,7247,7248,7249,7250,7251,7252,7253,7254,7255,7256,7257,7258,7259,7260,7261,7229,7230,7231,7232,7233,7091,7241,6534];const t=Math.floor(Math.random()*e.length);void 0!==e[t]&&adcm.callpixel(e[t])}catch(e){}},encode:function(e){return encodeURIComponent(e)},encodeFull:function(e){return encodeURIComponent(e).replace(/\./g,"%2E")},equal:function(e,t){if(!e||!t||e.length!=t.length)return!1;for(let n=0,o=e.length;n<o;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!this.equal(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0},blank:function(e){return e||""},aggregate:function(e){const t=document.referrer,n=window.location.hash,o=[];let i="i="+this.session+".";if(e.extdataid?i+=this.encode(e.extdataid):i+=Math.round(1e15*Math.random()),e.profileId&&e.platformId){const t=this.encode(e.platformId),n=this.encodeFull(e.profileId);i+="&a="+t+"&e="+n,o.push("ss:"+t),o.push("up:"+n),o.push("sync:up")}e&&e.idSessionDomain&&o.push("xdua:"+this.encode(e.idSessionDomain)),e&&e.idSessionPage&&o.push("xps:"+this.encode(e.idSessionPage)),e&&e.ga&&o.push("xga:"+this.encodeFull(e.ga.replace(/[\.]+/g,"_"))),e&&e.gid&&o.push("xgid:"+this.encodeFull(e.gid.replace(/[\.]+/g,"_"))),e.tm&&(o.push("tm:"+this.encode(e.tm)),e.tmstart&&o.push("tmstart:"+this.encode(e.tmstart)),e.tmend&&o.push("tmend:"+this.encode(e.tmend)),e.tmpoints&&o.push("tmpoints:"+this.encode(e.tmpoints)),e.tminterval&&o.push("tminterval:"+this.encode(e.tminterval)),e.tmiter&&o.push("tmiter:"+this.encode(e.tmiter))),e&&e.event&&o.push("et:"+this.encode(e.event)),e&&e.price&&o.push("ip:"+this.encode(e.price)),e&&e.elapsed_seconds&&o.push("es:"+this.encode(e.elapsed_seconds)),this.params||(this.params={referrer:t?/\/\/([^#]*)/gi.exec(t)[1]:/\/\/([^#]*)/gi.exec(window.location.href)[1],hash:null,tags:null});const c=function(e){return(e=(e=e.replace(/[^a-z0-9\.]+/g,"_")).replace(/[\_\_]+/g,"_")).replace(/[\.]+/g,"__")};let s=window.location.hostname;"www."===s.substring(0,4)&&(s=s.substring(4,s.length));const a=c(s.substring(s.lastIndexOf(".",s.lastIndexOf(".")-1)+1));if(s=c(s),s!==a?(o.push("dn:"+this.encode(s)),o.push("dn:"+this.encode(a))):o.push("dn:"+this.encode(a)),o.push("adcm:hit"),void 0===e.tags&&(e.tags=[]),"http:"===window.location.protocol&&e.tags.push("http"),e.tags&&o.push("tg:"+this.encode(e.tags.join(" "))),this.blank(n)!==this.blank(this.params.hash)&&(o.push("rh:"+this.encode(n.substr(1))),this.params.hash=n),/\/\/([^#]*)/gi.exec(window.location.href)[1]!==this.params.referrer&&t&&void 0!==t&&(i+="&pref="+this.encode(t)),Object.keys(e.tagsRaw).length>0)for(const t in e.tagsRaw)i+="&tg_"+t+"="+encodeURIComponent(e.tagsRaw[t]);if(o.length>0&&(i+="&c="+o.join(".")),this.config.triggers.catchRef.enable){let t=document.location.href;void 0!==e.ref&&e.ref?t=e.ref:this.config.triggers.catchRef.referrer&&(t=this.config.triggers.catchRef.referrer),i+="&ref="+encodeURIComponent(t)}return i},relocate:function(e){if(this.knownIds.indexOf(this.config.id)>=0){const t=()=>{const t="https://tag.digitaltarget.ru/ext/"+this.config.id+".js?i="+Math.round(1e15*Math.random());this.load(e,t)};try{CALL_LOCAL_ADCM_EXTENSION&&"function"==typeof CALL_LOCAL_ADCM_EXTENSION?CALL_LOCAL_ADCM_EXTENSION():t()}catch(e){t()}}else"function"==typeof e()&&e()},array_unique:function(e){const t=[];return e.forEach((function(e){e=e.trim(),-1===t.indexOf(e)&&t.push(e)})),t},call:function(e){const t=this;if(e)if(e.tags?(e.tags=e.tags.concat(t.config.tags),e.tags=t.array_unique(e.tags)):e.tags=t.config.tags,e.tagsRaw){if(Object.keys(t.config.tagsRaw).length>0)for(const n in t.config.tagsRaw)e.tagsRaw[n]=t.config.tagsRaw[n]}else e.tagsRaw=t.config.tagsRaw;else e={tags:t.config.tags,tagsRaw:t.config.tagsRaw};(e.profileId||this.config.profileId)&&(e.profileId=e.profileId||this.config.profileId,e.platformId=e.platformId||this.config.platformId||this.config.id),e.extdataid=e.extdataid||this.config.extdataid,e.idSessionDomain=e.idSessionDomain||this.config.idSessionDomain,e.idSessionPage=e.idSessionPage||this.config.idSessionPage,!1===this.config.triggers.gaid.loaded&&this.triggers.gaid(),e.ga=e.ga||this.config.ids.ga,e.gid=e.gid||this.config.ids.gid;const n=function(){const n=new Image;try{"function"==typeof e.success?n.onload=e.success:"function"==typeof t.config.triggers.push_to_server.success&&(n.onload=t.config.triggers.push_to_server.success),"function"==typeof e.error?n.onload=e.error:"function"==typeof t.config.triggers.push_to_server.error&&(n.onerror=t.config.triggers.push_to_server.error)}catch(e){}const o=e.id||t.config.id;n.src=window.location.protocol+"//dmg.digitaltarget.ru/1/"+o+"/i/i?"+t.aggregate(e)};if(this.loaded)n();else var o=setInterval((function(){t.loaded&&(n(),clearInterval(o))}),1e3)},callpixel:function(e){const t=this,n="i="+this.session+"."+Math.round(1e15*Math.random()),o=function(){(new Image).src=window.location.protocol+"//dmg.digitaltarget.ru/1/"+e+"/i/i?"+n+"&c=tg:adcm_pc"};if(this.loaded)o();else var i=setInterval((function(){t.loaded&&(o(),clearInterval(i))}),1e3)},callextpixel:function(e,t){if((void 0===t||!t)&&(t="https"),void 0!==(e=e.toString())&&e){const o=this,i=function(){(new Image).src=t+":"+e};if(this.loaded)i();else var n=setInterval((function(){o.loaded&&(i(),clearInterval(n))}),1e3)}else console.log("ADCM: Invalid external pixel url")},sessionManager:{page:{set:function(e){try{window.sessionStorage&&void 0!==window.sessionStorage.setItem&&window.sessionStorage.setItem("_84hUio38",e)}catch(e){}},get:function(){const e=window.adcm;try{if(window.sessionStorage&&void 0!==window.sessionStorage.getItem){const t=window.sessionStorage.getItem("_84hUio38");if(t)return t;{const t=e.sessionManager._generateRandomString("xps");return e.sessionManager.page.set(t),t}}}catch(e){}}},domain:{set:function(e){const t="_a_d3t6sf";try{window.localStorage&&void 0!==window.localStorage.setItem&&window.localStorage.setItem(t,e),document.cookie=t+"="+e+"; expires=Thu, 01 Jan 2024 00:00:00 UTC; path=/"}catch(e){}},get:function(){const e="_a_d3t6sf",t=window.adcm;try{if(window.localStorage&&void 0!==window.localStorage.getItem){const n=window.localStorage.getItem(e);if(n)return t.sessionManager.domain.set(n),n}}catch(e){}try{const n=document.cookie.replace(new RegExp("(?:(?:^|.*;s*)"+e+"s*=s*([^;]*).*$)|^.*$"),"$1");if(n)return t.sessionManager.domain.set(n),n}catch(e){}try{const e=t.sessionManager._generateRandomString("du");return t.sessionManager.domain.set(e),e}catch(e){}}},_generateRandomString:function(e){try{let t="";const n="wIVhxG0YUu56jA9DKZqt2EeviXpL3kF8dcP4_NybsmHQ1glBozSJfR7MarOWCTn";for(let e=0;e<22;e++)t+=n.charAt(Math.floor(Math.random()*n.length));return e+t}catch(e){}}},triggers:{gaid:function(){try{const e=window.adcm.config.triggers.gaid;if(!e.enable)return!1;const t={tags:[]},n=document.cookie.replace(/(?:(?:^|.*;\s*)_ga\s*\=\s*([^;]*).*$)|^.*$/,"$1");n&&(t.ga=n,t.tags.push("adcm_ga"),window.adcm.config.ids.ga=n);const o=document.cookie.replace(/(?:(?:^|.*;\s*)_gid\s*\=\s*([^;]*).*$)|^.*$/,"$1");o&&(t.gid=o,t.tags.push("adcm_gid"),window.adcm.config.ids.gid=o),(t.ga||t.gid)&&"function"==typeof e.callback()&&e.callback(t),e.loaded=!0}catch(e){}},noBounce:function(){try{const e=window.adcm,t=e.config.triggers.noBounce,n=t.param_call;n.tags=n.tags||[],n.tags.push("nobounce"),setTimeout((function(){e.call(n),"function"==typeof t.callback()&&t.callback()}),1e3*t.timeout)}catch(e){}},page_down_scroll:function(){try{const e=window.adcm,t=e.config.triggers.page_down_scroll,n=t.param_call,o=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-t.margin_bottom,i=function(){const c=document.documentElement,s=document.body;(c.scrollTop||s&&s.scrollTop||0)-c.clientTop+c.clientHeight>o&&(window.removeEventListener("scroll",i,!1),n.event="pds",e.call(n),"function"==typeof t.callback()&&t.callback())};window.addEventListener("scroll",i,!1),window.scrollTo(window.scrollX,window.scrollY-1)}catch(e){}},elapsed_seconds:function(){try{const e=window.adcm,t=e.config.triggers.elapsed_seconds,n=t.param_call;if(!t.timeouts||"object"!=typeof t.timeouts||0===t.timeouts.length)return!1;t.timeouts.forEach((function(o){setTimeout((function(){n.elapsed_seconds=o,e.call(n),"function"==typeof t.callback()&&t.callback()}),1e3*o)}))}catch(e){}},init_call:function(){const e=window.adcm,t=e.config.triggers.init_call,n=t.param_call;n.tags||(n.tags=[]),n.tags.push("adcmjs_init");try{void 0!==window.DeviceOrientationEvent&&window.DeviceOrientationEvent&&"ontouchstart"in window?e.config.tags.push("adcmjs_orient"):e.config.tags.push("adcmjs_noorient")}catch(e){}e.call(n),"function"==typeof t.callback()&&t.callback()},config:function(){try{const t=window.adcm,n=t.config.triggers.config,o=function(e){if(0===e.length)return!1;if(e.tags){const n=e.tags.split(" ");t.config.tags=t.config.tags.concat(n),t.config.tags=Array.from(new Set(t.config.tags)),t.config.tags=t.array_unique(t.config.tags)}for(const n in e)"tags"!==n&&void 0!==t.config[n]&&(t.config[n]=e[n])};if(n.el_id&&"string"==typeof n.el_id){if(!(e=document.getElementById(n.el_id)))return!1;o(e.dataset)}else if(n.el_class_name&&"string"==typeof n.el_class_name){const t=document.getElementsByClassName(n.el_class_name);for(inner_i=0;inner_i<t.length;inner_i++){var e;(e=t[inner_i])&&o(e.dataset)}}t.call({tags:["adcm_e_cfg"]}),"function"==typeof n.callback()&&n.callback()}catch(e){}},scroll_to:function(){const e=window.adcm,t=e.config.triggers.scroll_to,n=t.param_call,o=document.documentElement,i=document.body,c=i.getBoundingClientRect();o.scrollTop||i&&i.scrollTop,o.clientTop,o.clientHeight,function(){const s={},a=[];for(const e in t.markers){const n=t.markers[e];if(n.el_id&&"string"==typeof n.el_id){if(!(l=document.getElementById(n.el_id)))continue;var r=l.getBoundingClientRect();t.markers[e]._checkpoint_heigh=r.top-c.top,a.push(t.markers[e]._checkpoint_heigh),s[t.markers[e]._checkpoint_heigh]=t.markers[e]}else if(n.el_class_name&&"string"==typeof n.el_class_name){const o=document.getElementsByClassName(n.el_class_name);for(inner_i=0;inner_i<o.length;inner_i++){var l;if(l=o[inner_i]){r=l.getBoundingClientRect();t.markers[e]._checkpoint_heigh=r.top-c.top,a.push(t.markers[e]._checkpoint_heigh),s[t.markers[e]._checkpoint_heigh]=t.markers[e]}}}}const d=function(){if(0===s.length||0===a.length)return window.removeEventListener("scroll",d,!1),!1;const c=window.innerHeight,r=(o.scrollTop||i&&i.scrollTop||0)-o.clientTop+o.clientHeight-c/100*(100-t.window_checkpoint_percent),l=Math.min.apply(Math,a);if(r<l)return!1;const g=s[l];if(void 0===g)return window.removeEventListener("scroll",d,!1),!1;n.event=g.event,e.call(n),"function"==typeof t.callback()&&t.callback(),"function"==typeof g.callback()&&g.callback(),delete s[l],a.splice(a.indexOf(l),1)};window.addEventListener("scroll",d,!1),d()}()},scroll_percents:function(){const e=window.adcm,t=e.config.triggers.scroll_percents,n=t.param_call,o=document.documentElement,i=document.body;!function(){const c=t.percents.slice().sort((function(e,t){return e-t})),s=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),a=function(){const a=(o.scrollTop||i&&i.scrollTop||0)-o.clientTop+o.clientHeight;if(!c.length)return!1;if(a>=s/100*c[0]){const o=c[0];n.tags||(n.tags=[]),n.tags.push("psp_"+o),e.call(n),"function"==typeof t.callback(o)&&t.callback(o),c.shift()}};window.addEventListener("scroll",a,!1),a()}()}}}),p=()=>{const e=_(),t=w();e.ext(t),window.adcm=e,window.adcm_config&&window.adcm.configure(window.adcm_config)};p();